<?xml version='1.0' encoding='utf-8'?>
<!-- This template is for creating an Internet Draft using xml2rfc,
    which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629-xhtml.ent"[
<!ENTITY RFC4941 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4941.xml">
<!ENTITY RFC7217 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.7217.xml">
<!ENTITY RFC5176 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5176.xml">
<!ENTITY RFC8174 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.8174.xml">

]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs),
    please see http://xml.resource.org/authoring/README.html. -->
<rfc
      xmlns:xi="http://www.w3.org/2001/XInclude"
      category="info"
      docName="draft-ietf-madinas-use-cases-02"
      ipr="trust200902"
      obsoletes=""
      updates=""
      submissionType="IETF"
      xml:lang="en"
      tocInclude="true"
      tocDepth="4"
      symRefs="true"
      sortRefs="true"
      version="3">
  <!-- xml2rfc v2v3 conversion 2.38.1 -->
  <!-- category values: std, bcp, info, exp, and historic
    ipr values: trust200902, noModificationTrust200902, noDerivativesTrust200902,
       or pre5378Trust200902
    you can add the attributes updates="NNNN" and obsoletes="NNNN"
    they will automatically be output with "(if approved)" -->

 <!-- ***** FRONT MATTER ***** -->

 <front>
    <!-- The abbreviated title is used in the page header - it is only necessary if the
        full title is longer than 39 characters -->

   <title abbrev="RCM Use Cases">Randomized and Changing MAC Address Use Cases</title>
    <seriesInfo name="Internet-Draft" value="draft-ietf-madinas-use-cases-02"/>
    <!-- add 'role="editor"' below for the editors if appropriate -->

   <!-- Another author who claims to be an editor -->

      <author fullname="Jerome Henry" initials="J" surname="Henry">
       <organization>Cisco Systems</organization>
       <address>
         <postal>
           <country>USA</country>
         </postal>
         <email>jerhenry@cisco.com</email>
         <!-- uri and facsimile elements may also be added -->
      </address>
     </author>

      <author fullname="Yiu L. Lee" initials="Y." surname="Lee">
      <organization>Comcast</organization>
      <address>
        <postal>
          <street>1800 Arch Street</street>
         <city>Philadelphia</city>
          <region>PA</region>
          <code>19103</code>
          <country>USA</country>
        </postal>
        <email>yiu_lee@comcast.com</email>
        <!-- uri and facsimile elements may also be added -->
     </address>
    </author>


    <date year="2022"/>
    <!-- If the month and year are both specified and are the current ones, xml2rfc will fill
        in the current day for you. If only the current year is specified, xml2rfc will fill
	 in the current day and month for you. If the year is not the current one, it is
	 necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the
	 purpose of calculating the expiry date).  With drafts it is normally sufficient to
	 specify just the year. -->

   <!-- Meta-data Declarations -->

   <area>Internet</area>
    <workgroup>Internet Engineering Task Force</workgroup>
    <!-- WG name at the upperleft corner of the doc,
        IETF is fine for individual submissions.
	 If this element is not present, the default is "Network Working Group",
        which is used by the RFC Editor as a nod to the history of the IETF. -->

   <keyword>template</keyword>
    <!-- Keywords will be incorporated into HTML output
        files in a meta tag but they have no effect on text or nroff
        output. If you submit your draft to the RFC Editor, the
        keywords will be used for the search engine. -->

   <abstract>
      <t>To limit the association between a device, its traffic, its location and its user,
      client vendors have started implementing MAC address rotation. When such rotation
      happens, some in-network states may break, which may affect network efficiency and the user
      experience. At the same time, devices may continue sending other stable identifiers, defeating
      the MAC rotation purposes.
      This document lists various network environments and a set of network services that may
      be affected by such rotation. This document then examines settings and use cases where the user experience
      may be affected by in-network state disruption, and settings where other machine identifiers may
      expose the user privacy. Last, this document examines
      solutions to maintain user privacy while preserving user quality of experience and network
      operation efficiency.</t>
    </abstract>

  </front>
  <middle>
    <section numbered="true" toc="default">
      <name>Introduction</name>
      <t>WiFi technology has revolutionized communication and become the preferred technology and sometimes the only
      technology used by devices such as smartphones, tablets and Internet-of-Thing (IoT) devices. WiFi is an over-the-air technology,
      Attackers who are equiped with surveillance equipment can "monitor" WiFi packets and track the activity of WiFi devices.
      Once the association between
      a device and its user is made, identifying the device and its activity is sufficient
      to deduce information about what the user is doing, without the user consent.</t>

      <t>To reduce the risks of correlation between a device activity and its owner, multiple
      vendors have started to implement Randomized and Changing MAC addresses (RCM). With this
      scheme, an end-device implements a different RCM over time when exchanging traffic
      over a wireless network. By randomizing the MAC address, the persistent association between a given
      traffic flow and a single device is made more difficult, assuming no other visible unique identifiers are in use.</t>

	    <t>However, such address change may affect the user experience and the efficiency of legitimate
      network operations. For a long time, network designers and implementers relied on the assumption that a given machine,
      in a network implementing IEEE 802 technologies, would be represented by a unique network MAC address that would not change
      over time, despite the existence of tools to flush out the MAC address to bypass
      some network policies. When this assumption is broken, elements of network communication may also break.
      For example, sessions established between the end-device and network services may be lost and
      packets in translation may suddenly be without clear source or destination. As multiple clients implement
      fast-paced RCM rotations, network
		  services may be over-solicited by a small number of stations that appear as many clients.</t>

	    <t>At the same time, some network services rely on the client station providing an identifier, which can be
      the MAC address or another value. If the client implements MAC rotation but continues sending the same static
      identifier, then the association between a stable identifier identifier and the station continues despite the RCM scheme.
      There may be environements where such continued association is desirable, but others where the user privacy has
      more value than any continuity of network service state. </t>

      <t>There is a need to enumerate services that may be
      affected by RCM, and evaluate possible solutions to maintain both the quality of user experience
      and network efficiency while RCM happens and user privacy is reinforced. This document
      presents such assessment and recommendations.</t>

      <section numbered="true" toc="default">
        <name>Requirements Language</name>
        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
       "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
       document are to be interpreted as described in BCP 14 <xref target="RFC2119"
       format="default">RFC 2119</xref> <xref target="RFC8174"
       format="default">RFC 8174</xref> when, and only when, they appear in all capitals, as shown here.</t>
      </section>
    </section>


    <!-- This PI places the pagebreak correctly (before the section title) in the text output. -->

    <section numbered="true" toc="default">
      <name>MAC Address as an Identity: User vs. Device</name>
      <t>Any device member of a network implementing IEEE 802 technologies <xref target="IEEE.802-2014"/>
      includes several operating layers. Among them, the Media
      Access Control (MAC) layer defines rules to control how the device accesses the shared medium. In a
      network where a machine can communicate with one or more other machines, one such rule is that each
      machine needs to be identified, either as the target destination of a message, or as the source of a
      message (and thus the target destination of the answer). Initially intended as a 48-bit (6 octets)
      value in the first versions of the IEEE 802 Standard, other Standards under the IEEE 802 umbrella
      <xref target="IEEE.802.15.4P_2014"/> then allowed this address to take an extended
      format of 64 bits (8 octets), thus enabling a larger number of MAC addresses to coexist as the
      802 technologies became widely adopted.</t>

      <t>Regardless of the address length, different networks have different needs, and several bits of
      the first octet are reserved for specific purposes. In particular, the first bit is used to identify
      the destination address either as an individual (bit set to 0) or a group address (bit set to 1). The
      second bit, called the Universally or Locally Administered (U/L) Address Bit, indicates whether the address
      has been assigned by a local or universal administrator. Universally administered addresses have this
      bit set to 0. If this bit is set to 1, the entire address (i.e., 48 bits) has been locally administered
      <xref target="IEEE.802-2014"/> Section 8.4.</t>

      <t>The intent of this provision is important for the present document. The IEEE 802 Standard recognized
      that some devices may never travel and thus, always attaching to the same network, would not need a
      globally unique MAC address to would prevent address collision against any other device in any other network.
      To accommodate for this relaxed requirement, the second bit of the MAC
      address first octet was designed to express whether the address was intended
      to be globally unique, or if significance was only local. The address allocation method was not
      defined in the Standard in this later case, but the same clause
      defined that an address should be unique so as to avoid collision with any other device attached to the same network.</t>

      <t>It is also important to note that the purpose of the Universal version of the address was
      to avoid collisions and confusion, as any machine could connect to any network, and each machine needs
      to determine if it is the intended destination of a message or its response. The same clause 8.4
      reminds network designers and operators that all potential members of a network need to have a unique
      identifier in that network (if they are going to coexist in the network without confusion on which machine is the source
      or destination or any message). The advantage of a universal address is
      that a node with such an address can be attached to any Local Area Network (LAN) in the world with an assurance that its
      address is unique in that network.</t>

      <t>With the rapid development of wireless technologies and mobile devices, this scenario became
      very common. With a vast majority of networks implementing IEEE 802 radio technologies at
      the access, the MAC address of a wireless device can appear anywhere on the planet and collisions
      should still be avoided. However, the same evolution brought the distinction between two types of
      devices that the IEEE 802 Standard generally referred to as ‘nodes in a network’. Their definition is
      found in the IEEE 802E Recommended Practice (clause 6.2). One type is a shared service device, which
      functions are used by a number of people large enough that the device itself, its functions or its
      traffic cannot be associated with a single or small group of people. Examples of such devices include
      switches in a dense network, IEEE 802.11 (WLAN) access points in a crowded airport, task-specific
      (e.g. barcode scanners) devices, etc. Another type is a personal device, which is a machine, a node,
      primarily used by a single person or small group of people, and so that any identification of the
      device or its traffic can also be associated to the identification of the primary user or their traffic.
      Quite naturally, the identification of the device is trivial if the device expresses a
      universally unique MAC address. Then, the detection of elements directly or indirectly identifying
      the user of the device (Personally Identifiable Information, or PII) is sufficient to tie the
      universal MAC address to a user. Then, any detection of traffic that can be associated to the
      device becomes also associated with the known user of that device (Personally Correlated
      Information, or PCI). </t>

      <t>This possible identification or association presents a serious privacy issue,
      especially with wireless technologies. For most of them, and in particular for 802.11, the
      source and destination MAC addresses are not encrypted even in networks that implement encryption
      (so that each machine can easily detect if it is the intended target of the message before attempting
      to decrypt its content, and also identify the transmitter, so as to use the right decryption key when multiple
      unicast keys are in effect).</t>

      <t>This identification of the user associated to a node was clearly not the intent of the
      802 MAC address. A logical solution to remove this association is to use a locally administered
      address instead, and change the address in a fashion that prevents a continuous association between
      one MAC address and some PII. However, other network devices on the
      same LAN implementing a MAC layer also expect each device to be associated to a MAC address that would persist over
      time. When a device changes
      its MAC address, other devices on the same LAN may fail to recognize that the same machine is attempting
      to communicate with them. Additionally, multiple layers implemented at upper OSI layers have been designed
      with the assumption that each node on the LAN, using these services, would have a MAC address that would stay
      the same over time, and that this document calls a 'persistent' MAC address. This
      assumption sometimes adds to the PII confusion, for example in the case of Authentication, Association
      and Accounting (AAA) services authenticating
      the user of a machine and associating the authenticated user to the device MAC address. Other services
      solely focus on the machine (e.g. DHCP), but still expect each device to use a persistent MAC address, for example
      to re-assign the same IP address to a returning device.
      Changing the MAC address may disrupt these services.</t>

    </section>

    <section numbered="true" toc="default">
      <name>The Actors: Network Functional Entities and Human Entities</name>
      <t>The risk of service disruption is thus weighted against the privacy benefits. However, the plurality
      of actors involved in the exchanges tends to blur the boundaries of what privacy should be
      protected against. It might therefore be useful to list the actors associated to the network exchanges, either
      because they actively participate to these exchanges, or because they can observe them.
      Some actors are functional entities, some others are humans (or related) entities.</t>

      <section numbered="true" toc="default">
	      <name>Network Functional Entities</name>
	      <t>Network communications based on IEEE 802 technologies commonly rely on station identifiers based on a  MAC
        address. This MAC address is utilized by several types of network functional entitities.</t>
        <t>Wireless access network infrastructure devices (e.g. WLAN access points or controllers): these
        devices participate in IEEE 802 LAN operations. As such, they need to identify each machine as a source
        or destination so as to successfully continue exchanging frames. Part of the identification includes
        recording, and adapting to, devices communication capabilities (e.g. support for specific protocols).
        As a device changes its network attachment (roams) from one access point to another, the access points can
        exchange contextual information (e.g. device MAC, keying material) allowing the device session to
        continue seamlessly. These access points can also inform devices further in the wired network about
        the roam, to ensure that OSI model Layer 2 frames are redirected to the new device access point.</t>

        <t>Other network devices operating at the MAC layer: many wireless network access devices
        (e.g., IEEE 802.11 access points) are conceived as Layer 2 devices, and as such they bridge a frame from
        one medium (e.g., IEEE 802.11 or Wi-Fi) to another (e.g., IEEE 802.3 or Ethernet). This means that a wireless
        device MAC address often exists on the wire beyond the wireless access device. Devices connected to
        this wire also implement IEEE 802 technologies, and as such operate on the expectation that each device is
        associated to a MAC address that persists for the duration of continuous exchanges. For example, switches
        and bridges associate MAC addresses to individual ports (so as to know which port to send a frame
        intended for a particular MAC address). Similarly, authentication, authorization and accounting
        (AAA) services can validate the identity of a device and use the device MAC address as a first pointer
        to the device identity (before operating further verification). Similarly, some networking devices offer
        Layer-2 filtering policies that may rely on the connected MAC addresses. 802.1X-enabled devices may also selectively
        block the data portion of a port until a connecting device is authenticated. These services then use the
        MAC address as a first pointer to the device identity to allow or block data traffic. This list is not
        exhaustive. Multiple services are defined for 802.3 networks, and multiple services defined by the IEEE
        802.1 working group are also applicable to 802.3 networks. Wireless access points may also connect to
        other mediums than 802.3, which also implements mechanism under the umbrella of the general 802 Standard,
        and therefore expect the unique and persistent association of a MAC address to a device.</t>

        <t>Network devices operating at upper layers: some network devices provide functions and services
        above the MAC layer. Some of them also operate a MAC layer function: for example, routers provide
        IP forwarding services, but rely on the device MAC address to create the appropriate frame structure.
        Other devices and services operate at upper layers, but also rely upon the 802 principle of unique
        MAC-to-device mapping. For example, DHCPv4 services commonly provide a single IP address per MAC
        address (they do not assign more than one IPv4 address per MAC address, and assign a new IPv4 address to each
        new requesting MAC address). ARP and reverse-ARP services commonly expect that, once an IP-to-MAC mapping
        has been established, this mapping is valid and unlikely to change for the cache lifetime. DHCPv6 services
        commonly do not assign the same IPv6 address to two different requesting MAC addresses. Hybrid services,
        such as EoIP, also assume stability of the device-to-MAC-and-IP mapping for the duration of a given session.</t>
      </section>


      <section numbered="true" toc="default">
	      <name>Human-related Entities</name>
	      <t>Networks do no operate without humans actively involved. Humans may actively participate to the network
        structure and operations, or be observers. </t>
        <t>Over the air (OTA) observers: as the transmitting or receiving MAC address is usually not encrypted
        in wireless 802-technologies exchanges, and as any protocol-compatible device in range of the signal
        can read the frame header, OTA observers are able to read individual transmissions MAC addresses. Some
        wireless technologies also support techniques to establish distances or positions, allowing the observer,
        in some cases, to uniquely associate the MAC address to a physical device and it associated location.
        It can happen that an OTA observer has a legitimate reason to monitor a particular device, for example
        for IT support operations. However, it is difficult to control if another actor also monitors the same
        station with the goal of obtaining PII or PCI.</t>

        <t>Wireless access network operators: some wireless access networks are only offered to users or
        devices matching specific requirements, such as device type (e.g., IoT-only networks, factory operational
        networks). Therefore, operators can attempt to identify the devices (or the users) connecting to the
        networks under their care. They can use the MAC address to represent an identified device.</t>

        <t>Network access providers: wireless access networks are often considered beyond the first 2 layers of
        the OSI model. For example, several regulatory or legislative bodies can group all OSI layers into
        their functional effect of allowing network communication between machines. In this context, entities
        operating access networks can see their liability associated to the activity of devices communicating
        through the networks that these entities operate. In other contexts, operators assign network
        resources based on contractual conditions (e.g., fee, bandwidth fair share). In these scenarios,
        these operators may attempt to identify the devices and the users of their networks. They can use the
        MAC address to represent an identified device.</t>

        <t>Over the wire internal (OTWi) observers: because the device wireless MAC address continues to be
        present over the wire if the infrastructure connection device (e.g. access point) functions as a Layer
        2 bridge, observers may be positioned over the wire and read transmission MAC addresses. Such capability
        supposes that the observer has access to the wired segment of the broadcast domain where the frames
        are exchanged. In most networks, such capability requires physical access to an infrastructure wired
        device in the broadcast domain (e.g. switch closet), and is therefore not accessible to all.</t>

        <t>Over the wired external (OTWe) observers: beyond the broadcast domain, frames headers are removed
        by a routing device, and a new Layer 2 header is added before the frame is transmitted to the next
        segment. The personal device MAC address is not visible anymore, unless a mechanism copies the MAC
        address into a field that can be read while the packet travels onto the next segment (e.g. pre- <xref target="RFC4941"/>
        and pre- <xref target="RFC7217"/> IPv6 addresses built from the MAC address). Therefore, unless this last condition exists,
        OTWe observers are not able to see the device MAC address.</t>
      </section>


      <section numbered="true" toc="default">
        <name>The Trust and the Environments</name>
        <t>The surface of PII exposures that can drive MAC address randomization depends on the
        environment where the device operates, on the presence and nature of other devices in the
        environment, and on the type of network the device is communicating through. Therefore, a device
        can express an identity (such as a MAC address) that can persist over time if trust with the
        environment is established, or that can be temporal if an identity is required
        for a service in an environment where trust has not been established. Trust is not a binary currency.
        Thus it is useful to distinguish what trust a personal device may establish with the different entities
        at play in a L2 domain:</t>

        <ol spacing="normal" type="1">

          <li>Full trust: there are environments where a personal device establishes a trust relationship and can share a
          persistent
            device identity with the access network devices (e.g., access point and WLC), the services beyond the
            access point in the L2 broadcast domain (e.g. DHCP, AAA), without fear that observers or network actors may access
            PII that would not be shared willingly. The personal device (or its user) also has confidence that its
            identity is not shared beyond the L2 broadcast domain boundary.</li>
          <li>Selective trust: in other environments, the device may not be willing to share a persistent identity with some
            elements of the Layer 2 broadcast domain, but may be willing to share a persistent identity with other
            elements. For example, a device may want to change the MAC address it uses to communicate with the
            access point while maintaining the same IP address across the MAC address rotation (thus expressing
            a temporal identity to the access point, but a persistent identity to the DHCP server). That persistent
            identity may or may not be the same for different
            services.</li>
          <li>Zero trust: in other environments, the device may not be willing to share any persistent identity with any entity
            reachable through the Layer 2 broadcast domain, and may express a temporal identity to each of them. That temporal
            identity may or not be the same for different services.</li>

          </ol>

        <t> This trust relationship naturally depends on the relationship between the user of the personal device
        and the operator of the service. Thus, it is useful to observe the typical trust structure of common environments:</t>

        <ol spacing="normal" type="A">
          <li>Residential settings under the control of the user: this is typical of a home network with Wi-Fi in the LAN and
          Internet connection. In this environment, traffic over the Internet does not expose the MAC adddress if it is not
          copied to another field before routing happens. The wire segment within the broadcast domain is under the control of the user,
          and is therefore usually not at risk of hosting an eavesdropper. Full trust is typically established at
	        this level among users and with the network elements. The device trusts the access point and all L2 domain entities
          beyond the access point. However, unless the user has full access control over the physical space where the Wi-Fi
          transmissions can be detected, there is no guarantee that an eavesdropper would not be observing the communications.
          As such, it is common to assume that, even in this environement, full trust cannot be achieved.</li>

          <li>Managed residential settings: examples of this type of environment include shared living facilities
          and other collective environments where an operator manages the network for the residents. The OTA
          exposure is similar to that of a home. A number of devices larger than in a standard home may be
          present, and the operator may be requested to provide IT support to the residents. Therefore, the
          operator may need to identify a device activity in real time, but may also need to analyze logs so
          as to understand a past reported issue. For both activities, a device identification associated to the
          session is needed. Full trust is often established in this environment, at the scale of a series of a few
          sessions, not because it is assumed that no eavesdropper would observe the network activity, but because it is a
          common condition for the managed operations.</li>

          <li>Public guest networks: public hotspots, such as in shopping malls, hotels, stores, trains stations
          and airports are typical of this environment. The guest network operator may be legally mandated to
          identify devices or users or may have the option to leave all devices and users untracked. In this
          environment, trust is commonly not established with any element of the L2 broadcast domain (Zero trust model by default).</li>

          <li>Enterprises (with BYOD): users may be provided corporate devices or
          may bring their own devices. The devices are not directly under the control of a corporate IT
          team. Trust may be established as the device joins the network. Some enterprise models will mandate full trust, others,
          considering the BYOD nature of the device, will allow selective trust.</li>

          <li>Managed enterprises: in this environment, users are typically provided with corporate devices,
          and all connected devices are managed, for example through a Mobile Device Management (MDM) profile
          installed on the device. Full trust is created as the MDM profile is installed.</li>
        </ol>

    </section>

    <section anchor="dev_id" numbered="true" toc="default">
        <name>The Purpose of Device Identification and Associated Problems</name>
        <t>Many network functional devices offering a service to a personal
        device use the device MAC address to maintain service continuity.</t>

        <t>Wireless access points and controllers use the MAC address to validate the device connection
        context, including protocol capabilities, confirmation that authentication was completed, QoS or
        security profiles, encryption key material. Some advanced access points and controllers also include
        upper layer functions which purpose is covered below. A device changing its MAC address, without
        another recorded device identity, would cause the access point and the controller to lose these
        parameters. As such, the Layer 2 infrastructure does not know that the device (with its new MAC address)
        is authorized to communicate through the network. The encryption keying material is not identified
        anymore (causing the access point to fail decrypting the device traffic, and fail selecting the
        right key to send encrypted traffic to the device). In short, the entire context needs to be
        rebuilt, and a new session restarted. The time consumed by this procedure breaks any flow that
        needs continuity or short delay between packets on the device (e.g. real-time audio, video,
        AR/VR etc.) The 802.11i Standard recognizes that a device may leave the network and come back
        after a short time window. As such, the standard suggests that the infrastructure should keep the
        context for a device for a while after the device was last seen. MAC address rotation in this
        context can cause resource exhaustion on the wireless infrastructure and the flush of contexts,
        including for devices that are simply in temporal sleep mode.</t>

        <t>Other devices in the Layer 2 broadcast domain also use the MAC address to know whether and where to
        forward frames. MAC rotation can cause these devices to exhaust their resources, holding in memory
        traffic for a device which port location can no longer be found. As these infrastructure devices
        also implement a cache (to remember the port position of each known device), too frequent MAC rotation
        can cause resources exhaustion and the flush of older MAC addresses, including for devices that did
        not rotate their MAC. For the RCM device, these effects translate into session discontinuity
        and return traffic losses.</t>

        <t>In wireless contexts, 802.1X authenticators rely on the device and user identity validation
        provided by a AAA server to open their port to data transmission. The MAC address is used to
        verify that the device is in the authorized list, and the associated key used to decrypt the
        device traffic. A change in MAC address causes the port to be closed to the device data traffic
        until the AAA server confirms the validity of the new MAC address. Therefore, MAC rotation can
        interrupt the device traffic, and cause a strain on the AAA server.</t>

        <t>DHCP servers, without a unique identification of the device, lose track of which IP address is
        validly assigned. Unless the RCM device releases the IP address before the rotation
        occurs, DHCP servers are at risk of scope exhaustion, causing new devices (and RCM devices)
        to fail to obtain a new IP address. Even if the RCM device releases the IP address before
        the rotation occurs, the DHCP server typically holds the released IP address for a certain duration,
        in case the leaving MAC would return. As the DHCP server cannot know if the release is due to a
        temporal disconnection or a MAC rotation, the risk of scope address exhaustion exists even in cases
        where the IP address is released.</t>

        <t>Routers keep track of which MAC address is on which interface. MAC rotation can cause MAC
        address cache exhaustion, but also the need for frequent ARP and inverse ARP exchanges.</t>

        <t>In residential settings (environments type A), policies can be in place to control the
        traffic of some devices (e.g. parental control, block-list devices). These policies are often based on the device
        MAC address. Rotation of the MAC address removes the possibility for such control.</t>

        <t>In residential settings (environments type A) and in enterprises (environments types D and E),
        device recognition and ranging may be used for IoT-related functionalities (door unlock, preferred
        light and temperature configuration, etc.) These functions often rely on the detection of the
        device wireless MAC address. MAC address rotation breaks the services based on such model.</t>

        <t>In managed residential settings (environments types B) and in enterprises (environments types
        D and E), the network operator is often requested to provide IT support. With
        MAC address rotation, real time support is only possible if the user is able to provide the
        current MAC address. Service improvement support is not possible if the MAC address that
        the device had at the (past) time of the reported issue is not known at the time the issue
		    is reported.</t>

	      <t>In industrial environements, polocies are associated to each group of objects, including IoT. MAC
        address roation may prevent an IoT device from being identified properly, thus leading to network
        quarantine and disruption of operations.</t>

      </section>

<section numbered="true" toc="default">
  <name>Scenario Mapping Table</name>

  <t><xref target="dev_id" /> discusses different environments, different settings, and the expectations of
  users and network operators. <xref target="scenario_table" /> summarizes the expected degree of trust, network
  admin responsibility, complexity of supported network services and network support expectation from the user.</t>

<table anchor="scenario_table" align="center">
  <name>Scenario Mapping Table</name>
  <thead>
    <tr>
      <th align="center">Network Location</th>
      <th align="center">Trust Degree</th>
      <th align="center">Network Admin </th>
      <th align="center">Network Services</th>
      <th align="center">Network Support Expectation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="center">Home</td>
      <td align="center">Medium</td>
      <td align="center">User</td>
      <td align="center">Medium</td>
      <td align="center">Low</td>
    </tr>
     <tr>
      <td align="center">Managed Residential</td>
      <td align="center">Medium</td>
      <td align="center">IT</td>
      <td align="center">Medium</td>
      <td align="center">Medium</td>
    </tr>
    <tr>
      <td align="center">Campus (BYOD)</td>
      <td align="center">Medium</td>
      <td align="center">IT</td>
      <td align="center">Complex</td>
      <td align="center">Medium</td>
    </tr>
    <tr>
      <td align="center">Enterprise (MDM)</td>
      <td align="center">High</td>
      <td align="center">IT</td>
      <td align="center">Complex</td>
      <td align="center">High</td>
    </tr>
    <tr>
      <td align="center">Hospitality</td>
      <td align="center">Low</td>
      <td align="center">IT</td>
      <td align="center">Simple</td>
      <td align="center">Medium</td>
    </tr>
    <tr>
      <td align="center">Public WiFi</td>
      <td align="center">Low</td>
      <td align="center">ISP</td>
      <td align="center">Simple</td>
      <td align="center">Low</td>
    </tr>
  </tbody>
</table>


<t>For example: a Home network is sometimes considered to be trusted and safe, where users are not worried about
other users (or the home network admin) seeing their MAC address. Users expect a simple procedure to connect
to their home network. All devices in the home network often trust each other. The Home network can also include many
IoT devices, which need to be simple to onboard
and manage. The home user commonly expects the network operator to protect the home network from external
threats (attacks from the Internet). The home user also commonly expects simple policy features (e.g., Parental Control).
Most home users do not expect to need networking skills to manage their home network. Such environemenst may lead to
full-trust conditions. However, if the trust commonly exists between allowed actors, there is no guarantee that an
eavesdropper would not be observing the Wi-Fi traffic from outside, thus practically limiting the applicability of
the trust in most home scenarios.</t>

<t>On the other end of the spectrum, Public Wi-Fi is often considered to be completely untrusted, where a user has
 no expectation of being able to trust other users or any actor inside or outside of the Layer 2 domain.
 Privacy is the number
one concern for the user. Most users connecting to Public Wi-Fi only require
simple Internet connectivity service, and expect only limited to no technical support.</t>

</section>


      <section numbered="true" toc="default">
        <name>Requirements Formulation</name>
        <t>The section describes the requirements for Randomized and Changing MAC-addresses: </t>

        <ol spacing="normal" type="REQ%d">
		      <li>The network must not make any assumption about client MAC address persistence.
          MAC address change must happen while allowing for service continuity.  If a service
          is interrupted during the RCM process, there must be a formal mechanism for the
          client and the network to exchange about the interruption.</li>

	      	<li>During duration of the services, the device should not change its identity.
          Any change of identity may result in re-authentication and interruption of the current network services.</li>

	      	<li>Survey the current standards that use MAC address as a device identifier in the protocol.  Make
          recommendation to the working groups to remove the dependency.</li>

	      	<li>Work as liaison with external standard bodies such as IEEE, BBF and WBA to align with use cases and
          requirements.</li>

          <li> Identify a secure mechanism to authenticate and exchange network identity to the device. </li>

          <li>Identify a secure mechanism to inform the device about the type of network the device is connecting
          to (e.g. public Wi-Fi, enterprise, home), allowing the user to select the device identity (or identities) accordingly.</li>

          <li> Identify a secure mechanism for the network to request device identity.  Upon successful
          authentication, the network may provide the device a temporary network-based marker to use the network services.</li>

          <li>Identify a secure mechanism for the device to notify the network prior to changing its MAC address.</li>
        </ol>

      </section>

  </section>

  <section anchor="solutions" numbered="true" toc="default">
  <name>Existing Solutions</name>
      <t>Technical solutions exist that may address some of the requirements listed in the previous section for environements
      described in section <xref target="dev_id"/> </t>


      <section anchor="wpa" numbered="true" toc="default">
	      <name>802.1X with WPA2 / WPA3</name>
        <t> At the time of association to a Wi-Fi access point, 802.1X authentication coupled with
        WPA2 or WPA3 encryption schemes allows for the mutual identification of the client device or of the user of the device
        and an authentication authority. The authentication exchange is protected from eavesdropping. In this scenario, the user or the
        device identity can be obfuscated from external observers. However, the authentication authority is in most cases under the control
        of the same entity as the network access provider, thus making the user or device identity visible to the network owner. </t>

	      <t>This scheme is therefore well-adapted to enterprise environements, where a level of trust is established between the user
        and the enterprise network operator. In this scheme, rotation of MAC address can occur through brief disconnections and
        reconnections (under the rules of 802.11-2020). Authentication may then need to reoccur, with an associated cost of service
        disruption and additional load on the enterprise infrastructure, and an associated benefit of limiting the exposure of a continuous
        MAC address to external observers. The adoption of this scheme is however limited outside of the enterprise environement by
        the requirement to install an authentication profile on the end device, that would be recognized and accepted by a local authentication
        authority and its authentication server. Such server is uncommon in a home environement, and the procedure to install a profile
        cumbersome for most untrained users. Remembering that 2022 estimations count approximatively 500 million Wi-Fi hotspots on the
        planet, the likelihood that a user or device profile would match a profile recognized by a public Wi-Fi authentication authority
        is also fairly limited, thus restricting the adoption of this scheme for public Wi-Fi as well. Similar limitations are
        found in hospitality environments.</t>

      <section anchor="OpenRoaming" numbered="true" toc="default">
	      <name>OpenRoaming</name>
        <t> In order to alleviate some of the limitations listed above, the Wireless Broadband Alliance (WBA) OpenRoaming Standard
        introduces an intermediate trusted relay between local venues and sources of identity <xref target="WBA-RCM"/>.
        The federation structure also extends the
        type of authorities that can be used as identity sources (compared to traditional enterprise-based 802.1X scheme for Wi-Fi), and also
        facilitates the establishment of trust between a local venue and an identity provider. Such procedure drammatically increases the
        likelihood that one or more identity profiles for the user or the device will be recognized by a local venue. At the same time,
        authentication does not occur to the local venue, thus offering the possibility for the user or the device to keep their identity obfuscated
        from the local network operator, unless that operator specifically expresses the requirement to disclose such identity (in which case
        the user has the option to accept or decline the connection and associated identity exposure).</t>

        <t>The OpenRoaming scheme therefore seems well-adapted to public Wi-Fi and hospitality environements, allowing for the obfuscation
        of the identity from unauthorized entities, while also permitting mutual authentication between the device or the user and a trusted
        identity provider. Just like with standard 802.1X scheme for Wi-Fi, authentication allows the establishment of WPA2 or WPA3 keys that
        can then be used to encrypt the communication between the device and the access point, thus obfuscating the traffic from observers.</t>

	      <t> Just like in the enterprise case, rotation of MAC address can occur through brief disconnections and reconnections
        (under the rules of 802.11-2020). Authentication may then need to reoccur, with an associated cost of service disruption and additional
        load on the venue and identity provider infrastructure, and an associated benefit of limiting the exposure of a continuous MAC address to
        external observers. Limitations of this scheme include the requirement to first install one or more profiles on the client device. This
        scheme also requires the local venue network to support RADSEC and the relay function, which may not be common in small hotspot networks
        and in home environments.</t>
	    </section>

		</section>

  </section>

	<section anchor="IANA" numbered="true" toc="default">
    <name>IANA Considerations</name>
    <t>This memo includes no request to IANA.</t>
  </section>

  <section anchor="Security" numbered="true" toc="default">
    <name>Security Considerations</name>
    <t>Privacy considerations are discussed throughout this document.</t>
  </section>


</middle>


  <!--  *****BACK MATTER ***** -->
 <back>
    <!-- References split into informative and normative -->

   <!-- There are 2 ways to insert reference entries from the citation libraries:
    1. define an ENTITY at the top, and use "ampersand character"RFC2629; here (as shown)
    2. simply use a PI "less than character"?rfc include="reference.RFC.2119.xml"?> here
       (for I-Ds: include="reference.I-D.narten-iana-considerations-rfc2434bis.xml")
    Both are cited textually in the same manner: by using xref elements.
    If you use the PI option, xml2rfc will, by default, try to find included files in the same
    directory as the including file. You can also define the XML_LIBRARY environment variable
    with a value containing a set of directories to search.  These can be either in the local
    filing system or remote ones accessed by http (http://domain/dir/... ).-->

    <references title="Normative References">
      <?rfc include="reference.RFC.2119.xml" ?>
      <?rfc include="reference.RFC.3552.xml" ?>
	    <?rfc include="reference.RFC.5226.xml" ?>
   </references>

   <references title="Informative References">
      <?rfc include="reference.RFC.4941.xml" ?>
      <?rfc include="reference.RFC.5176.xml" ?>
      <?rfc include="reference.RFC.7217.xml" ?>
      <?rfc include="reference.RFC.8174.xml" ?>
      <?rfc include="reference.IEEE.802.15.4P_2014.xml" ?>

      <reference anchor="IEEE.802-2014" target="https://ieeexplore.ieee.org/document/6847097">
	      <front>
		      <title>IEEE Standard for Local and Metropolitan Area Networks: Overview and Architecture</title>
		      <author>
			      <organization>IEEE</organization>
          </author>
		        <date year="2014"></date>
	      </front>
      </reference>

        <reference anchor="WBA-RCM">
	      <front>
		      <title>Wi-Fi Device Identification</title>
		      <author>
			      <organization>Wireless Broadband Alliance</organization>
          </author>
		        <date month="March" year="2022"></date>
	      </front>
      </reference>

   </references>



<!-- Change Log

v00 2021-01-31 Initial WG version
v01	2021-03-10 Updated by Jerome for IETF113's meeting
v02 2021-07-09 Updated by Jerome for IETF114's meeting

-->
 </back>

</rfc>
